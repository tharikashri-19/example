<!DOCTYPE html>
<html>
  <head>
    <title>My Current Location (Geoapify)</title>

    <!-- MapLibre CSS -->
    <link
      href="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.css"
      rel="stylesheet"
    />

    <style>
      #map {
        height: 500px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h2>My Current Location</h2>
    <div id="map"></div>

    <!-- MapLibre JS -->
    <script src="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.js"></script>

    <script>
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;

            const map = new maplibregl.Map({
              container: "map",
              style: `https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=df043ba3a76f47a69b6785b4b257eb66`,
              center: [lng, lat],
              zoom: 15,
            });

            // Marker
            new maplibregl.Marker({ color: "#ff0000" })
              .setLngLat([lng, lat])
              .addTo(map);

            // Controls
            map.addControl(new maplibregl.NavigationControl());
          },
          function () {
            alert("Location permission denied");
          }
        );
      } else {
        alert("Geolocation not supported");
      }
    </script>
  </body>
</html>
